BINDIR=$PREFIX/libexec
DATADIR=$PREFIX/share/amSynth


INST=no
EDFAIL=no

#
# copy default controller setup if required
#
if test -f ~/.amSynthControllersrc; then
	INST=no
else
	echo "Copying default MIDI controller config to ~/.amSynthControllersrc"
	cp $DATADIR/Controllersrc ~/.amSynthControllersrc
fi

#
# copy default bank if required
#
if test -f ~/.amSynth.presets; then
	INST=no
else
	echo "copying default preset bank to ~/.amSynth.presets"
	echo "installation complete, launching amSynth..."
	echo ""
	cp $DATADIR/presets ~/.amSynth.presets
fi

#
# run the binary
#
$BINDIR/amSynth.bin $*

#
# check error code for errors
#
case $? in
130)
	exit
	;;
0)
	exit
	;;
60)
	echo
	echo "**** There was an error connecting to the JACK server! ****"
	echo
	echo "please make sure you have the jack server running!"
	echo
	exit
	;;
255)
	echo
	echo "**** There was an error starting the audio system ****"
	echo
	echo "please check your config in ~/.amSynthrc"
	echo
	exit
	;;
*)
	echo
	echo "********** there was an error! **********"
	echo
	echo "please check your config in ~/.amSynthrc"
	echo
	exit
	;;
esac
